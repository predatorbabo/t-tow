import{r as c,U as l,u as S,j as e,T as R,a as U,s as M,b as y,g as P,d as w,c as N,e as A,f as D,h as I}from"./index-DTsffN95.js";const q=({onLogin:g,currentLang:h,setLanguage:$})=>{const[n,C]=c.useState(!0),[i,p]=c.useState(l.USER),[f,b]=c.useState(null),[v,j]=c.useState(!1),[a,E]=c.useState({email:"",password:"",phone:"",vehicleModel:"",vehiclePlate:"",name:""}),u=U[h],{primaryColor:m,textColor:o}=S(),t=c.useMemo(()=>({background:o==="gray"?"bg-gray-100":"bg-blue-100",text:o==="gray"?"text-gray-800":"text-blue-800",textMuted:o==="gray"?"text-gray-500":"text-blue-500",primary:m==="blue"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white",primaryText:m==="blue"?"text-blue-600":"text-gray-600",ring:m==="blue"?"focus:ring-blue-500":"focus:ring-gray-500",border:o==="gray"?"border-gray-300":"border-blue-300",activeTab:m==="blue"?"bg-white shadow text-blue-600":"bg-white shadow text-gray-600",inactiveTab:o==="gray"?"text-gray-500":"text-blue-500"}),[m,o]),d=x=>{const{name:s,value:r}=x.target;E(k=>({...k,[s]:r}))},T=async x=>{x.preventDefault(),j(!0),b(null);try{if(n){const s=await M(y,a.email,a.password),r=await P(w(N,"users",s.user.uid));r.exists()?g(r.data()):b("User data not found.")}else{const s=await A(y,a.email,a.password);await D(s.user);const r={id:s.user.uid,email:a.email,phone:a.phone,name:a.name,role:i,language:h,verified:s.user.emailVerified,...i===l.USER&&{vehicle:{model:a.vehicleModel,plate:a.vehiclePlate}},...i===l.OWNER&&{companyName:"My Towing Co",isAvailable:!0,truckType:"flatbed",location:{lat:0,lng:0},lastUpdate:Date.now()}};await I(w(N,"users",s.user.uid),r),g(r)}}catch(s){b(s.message)}finally{j(!1)}};return e.jsxs("div",{className:`min-h-screen ${t.background} flex flex-col justify-center p-6 ${h==="ar"?"rtl":""}`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${t.primary.split(" ")[0]} text-white`,children:e.jsx(R,{size:32})}),e.jsx("h1",{className:`text-3xl font-bold ${t.text}`,children:"DzTow"}),e.jsx("p",{className:`${t.textMuted} mt-2`,children:u.welcome})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[e.jsxs("div",{className:`flex justify-center mb-6 ${t.background} p-1 rounded-lg`,children:[e.jsx("button",{onClick:()=>p(l.USER),className:`flex-1 py-2 rounded-md text-sm font-medium transition-all ${i===l.USER?t.activeTab:t.inactiveTab}`,children:u.driver}),e.jsx("button",{onClick:()=>p(l.OWNER),className:`flex-1 py-2 rounded-md text-sm font-medium transition-all ${i===l.OWNER?t.activeTab:t.inactiveTab}`,children:u.owner})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[!n&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"Name"}),e.jsx("input",{type:"text",name:"name",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"Your Name",required:!0,value:a.name,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"Email"}),e.jsx("input",{type:"email",name:"email",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"email@example.com",required:!0,value:a.email,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"Password"}),e.jsx("input",{type:"password",name:"password",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"••••••",required:!0,value:a.password,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"0550 00 00 00",required:!0,value:a.phone,onChange:d})]}),!n&&i===l.USER&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"Vehicle Model"}),e.jsx("input",{type:"text",name:"vehicleModel",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"e.g. Renault Clio 4",value:a.vehicleModel,onChange:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t.text} mb-1`,children:"License Plate"}),e.jsx("input",{type:"text",name:"vehiclePlate",className:`w-full p-3 border ${t.border} rounded-lg focus:ring-2 ${t.ring} outline-none`,placeholder:"00123 115 16",value:a.vehiclePlate,onChange:d})]})]}),f&&e.jsx("p",{className:"text-red-500 text-sm text-center",children:f}),e.jsx("button",{type:"submit",className:`w-full py-3 rounded-lg font-semibold transition-colors ${t.primary}`,disabled:v,children:v?"Loading...":n?u.login:u.signup})]}),e.jsx("button",{onClick:()=>C(!n),className:`w-full mt-4 text-sm ${t.primaryText} text-center`,children:n?"Need an account? Sign up":"Already have an account? Login"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("select",{value:h,onChange:x=>$(x.target.value),className:`bg-transparent ${t.textMuted} text-sm`,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"ar",children:"العربية"})]})})]})};export{q as default};
